{"name":"Blingbag","tagline":"Behavior-Rich Domain Models... 'cause every domain gotta bling!","google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","body":"BlingBag\r\n========\r\n\r\nName borrowed from \r\n### The Problem:\r\nAs an excellent software developer, you want to be sure that your code is maintainable, testable, expressive, and beautiful. But sometimes those desires seem to conflict with one another. For instance, an expressive domain should contain entities that, not only include well-named properties, but also the behavior of the business's domain. But, if you include behavior in your domain entities, you run the risk of harming the application's maintainability by having classes with more than one \"reason to change\" or \"responsibility\" (see Single Responsibility Principle). \r\n\r\n### The Solution:\r\nWell, the solution really has two parts: 1) Double-Dispatch and 2) Domain Events. Since this wiki is all about domain events with BlingBag, I'll let you read about Double-Dispatch on your own and stick to the subject at hand. So, consider the following POCO class:\r\n\r\n```csharp\r\npublic class Account\r\n{\r\n    public string Name { get; set; }\r\n    public long Id { get; set; }\r\n    public string EmailAddress { get; set; }\r\n}\r\n``` \r\n\r\nThe above POCO is how all of my domain entities used to look. It's clean, but boring... this class does absolutely nothing. Before I met domain events, I would have created any number of domain \"services\" that performed actions on this Account class. The problem with this is that, in order to read the code and decypher what the Account does, you have to go service fishing and search for all the services that touch Account. It's a bit of a shame that we have such a clean code base, but one that expresses very little of the actual domain.\r\n\r\nNow, let's add some behavior. Our imaginary business has passed down a new requirement from on high: \r\n\"As an account, I can change my name.\"\r\n\r\nSo, consider the same POCO class with a bit of behavior:\r\n\r\n```csharp\r\npublic class Account\r\n{\r\n    public string Name { get; private set; }\r\n    public long Id { get; set; }\r\n    public string EmailAddress { get; set; }\r\n\r\n    public void ChangeName(string newName)\r\n    {\r\n        Name = newName;\r\n    }\r\n}\r\n``` \r\n\r\nThis is great. We're starting to make our Account entity a little more interesting. But, we have done very little and are pretty restricted to what we can actually do. But we still have three more pieces of the requirement to implement (found in a pencil-written footnote):\r\n\r\nWhen account name changes...\r\n- account should be saved to the database.\r\n- should email the account owner notifying of the change\r\n- should log the change\r\n\r\nHow can we do all that from inside a POCO domain entity? Well, the answer is that you can't (or shouldn't). BUT, what you CAN do is send out a signal to the rest of the domain that the name has changed and allow the domain to respond to the signal.\r\n\r\nSo, consider the same POCO, now equipped with BlingBag:\r\n\r\n```csharp\r\npublic class Account\r\n{\r\n    public string Name { get; private set; }\r\n    public long Id { get; set; }\r\n    public string EmailAddress { get; set; }\r\n\r\n    public event Blinger NotifyObservers;\r\n\r\n    public void ChangeName(string newName)\r\n    {\r\n        var oldName = Name;\r\n        Name = newName;\r\n        NotifyObservers(new TheNameChanged(this, oldName, newName));\r\n    }\r\n}\r\n``` \r\n\r\n## Behavior-Rich Domain Model - Blingin!\r\nThat's more like it! Now, our domain entity has behavior that expresses the requirements of the business. At this point, any number of event handlers (observers) can respond to the TheNameChanged \"event\". To fulfill our client's requirements, here are some possible event handlers:\r\n\r\n* UpdateTheAccountInTheDatabaseAfterNameChange\r\n* EmailAccountOwnerAfterNameChange\r\n* LogThatAccountNameWasChanged\r\n\r\nFor more information on how to install, implement or use BlingBag, [check out the wiki](BlingBag/wiki/home).\r\n\r\nFor sample code, check out the [sample app in the source code](https://github.com/bsommardahl/BlingBag/tree/master/src/BlingBag.SampleConsoleApp)."}